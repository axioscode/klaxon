server {
  listen 80;
  charset utf-8;

  location / {
    # force TLS
    if ($http_x_forwarded_proto != "https") {
      rewrite ^ https://$http_host$request_uri? permanent;
    }

    proxy_pass http://klaxon:3000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }

  access_log /var/log/nginx/klaxon.access.log;
  error_log  /var/log/nginx/klaxon.error.log;

  # location = /nginx_status {
  #  stub_status on;
  #  access_log off;
  #  allow all;
  #  deny all;
  # }

  # Force the latest IE version
  add_header "X-UA-Compatible" "IE=Edge";
}